# Веб-приложение для генерации сопроводительного письма

Отдельное веб-приложение для создания персонализированных сопроводительных писем с использованием AI.

## Функциональность

1. **Авторизация HH.ru** - OAuth авторизация для получения данных вакансии
2. **Загрузка PDF резюме** - использует `PDFResumeParser` для обработки
3. **Анализ вакансии** - получает данные через HH.ru API
4. **Генерация письма** - использует `EnhancedLLMCoverLetterGenerator`
5. **Детальные результаты** - полный анализ и структура письма

## Установка и запуск

### 1. Настройка окружения

Убедитесь, что файл `.env` содержит:
```bash
OPENAI_API_KEY=your_openai_api_key
HH_CLIENT_ID=your_hh_client_id
HH_CLIENT_SECRET=your_hh_client_secret
HH_REDIRECT_URI=http://localhost:8080/callback
```

### 2. Запуск OAuth сервера

В одном терминале:
```bash
python -m src.callback_local_server.main
```

### 3. Запуск веб-приложения

В другом терминале:
```bash
python -m src.web_app.cover_letter.main
```

Приложение будет доступно по адресу: http://localhost:8001

## Использование

1. Откройте http://localhost:8001 в браузере
2. Нажмите "Авторизоваться на HH.ru" для получения токенов
3. Загрузите PDF резюме
4. Введите ссылку на целевую вакансию
5. Нажмите "Сгенерировать сопроводительное письмо"
6. Получите персонализированное письмо с анализом

## Результаты включают

- **Готовое письмо** - полный текст для отправки работодателю
- **Контекст компании** - анализ размера, типа роли, требований
- **Соответствие навыков** - релевантные навыки и достижения
- **Стратегия персонализации** - тональность и кастомизация
- **Оценка качества** - метрики персонализации, релевантности, вовлеченности
- **Структура письма** - разбор по компонентам (зацепка, примеры, призыв к действию)

## Используемые компоненты

- `src.parsers.pdf_resume_parser.PDFResumeParser` - парсинг PDF резюме
- `src.parsers.vacancy_extractor.VacancyExtractor` - извлечение данных вакансии
- `src.hh.api_client.HHApiClient` - работа с HH.ru API
- `src.hh.auth.HHAuthService` - авторизация HH.ru
- `src.llm_cover_letter.EnhancedLLMCoverLetterGenerator` - генерация писем

## Архитектура

```
src/web_app/cover_letter/
├── main.py              # FastAPI приложение (порт 8001)
├── templates/
│   └── index.html       # HTML интерфейс
└── README.md           # Документация
```

## Отличия от гап-анализа

- **Цель**: генерация персонализированного письма вместо анализа соответствия
- **Результат**: готовый текст письма + структурный анализ
- **LLM сервис**: `EnhancedLLMCoverLetterGenerator` вместо `LLMGapAnalyzer`
- **Порт**: 8001 вместо 8000
- **Цветовая схема**: зеленая вместо синей