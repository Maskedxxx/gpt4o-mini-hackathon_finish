# src/llm_interview_checklist/llm_interview_checklist_generator.py
import logging
from typing import Optional, Dict, Any
from openai import OpenAI
from pydantic import ValidationError

from src.llm_interview_checklist.config import settings
from src.models.interview_checklist_models import InterviewChecklist, ProfessionalInterviewChecklist
from src.llm_interview_checklist.formatter import format_resume_for_interview_prep, format_vacancy_for_interview_prep
from src.security.openai_control import openai_controller
from src.demo_cache.demo_manager import DemoManager

from src.utils import get_logger
logger = get_logger()

class LLMInterviewChecklistGenerator:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –ø–æ–º–æ—â—å—é OpenAI API"""
    
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ OpenAI."""
        self.config = settings
        self.client = OpenAI(api_key=self.config.api_key)
        self.model = self.config.model_name
    
    def _analyze_candidate_profile(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any]) -> Dict[str, str]:
        """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏."""
        
        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –ø–æ –æ–ø—ã—Ç—É
        experience_list = parsed_resume.get('experience', [])
        total_experience_years = len(experience_list)  # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
        
        candidate_level = "JUNIOR"
        if total_experience_years >= 6:
            candidate_level = "SENIOR"
        elif total_experience_years >= 3:
            candidate_level = "MIDDLE"
        
        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
        vacancy_description = parsed_vacancy.get('description', '').lower()
        position_title = parsed_resume.get('title', '').lower()
        
        vacancy_type = "OTHER"
        if any(word in vacancy_description + position_title for word in ['—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫', 'developer', '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç', 'frontend', 'backend']):
            vacancy_type = "DEVELOPER"
        elif any(word in vacancy_description + position_title for word in ['—Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫', 'qa', 'quality']):
            vacancy_type = "QA_ENGINEER"
        elif any(word in vacancy_description + position_title for word in ['–¥–∞–Ω–Ω', 'data', 'analyst', 'scientist']):
            vacancy_type = "DATA_SPECIALIST"
        elif any(word in vacancy_description + position_title for word in ['–∞–Ω–∞–ª–∏—Ç–∏–∫', 'analyst', '–±–∏–∑–Ω–µ—Å']):
            vacancy_type = "BUSINESS_ANALYST"
        elif any(word in vacancy_description + position_title for word in ['–¥–∏–∑–∞–π–Ω', 'design', 'ux', 'ui']):
            vacancy_type = "DESIGNER"
        elif any(word in vacancy_description + position_title for word in ['devops', 'sre', '–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä']):
            vacancy_type = "DEVOPS"
        elif any(word in vacancy_description + position_title for word in ['–º–µ–Ω–µ–¥–∂–µ—Ä', 'manager', 'lead', '—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å']):
            vacancy_type = "MANAGER"
        
        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏
        company_format = "MEDIUM_COMPANY"  # default
        if any(word in vacancy_description for word in ['—Å—Ç–∞—Ä—Ç–∞–ø', 'startup']):
            company_format = "STARTUP"
        elif any(word in vacancy_description for word in ['–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è', 'enterprise', '–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω']):
            company_format = "LARGE_CORP"
        elif any(word in vacancy_description for word in ['international', 'global']):
            company_format = "INTERNATIONAL"
        
        return {
            'candidate_level': candidate_level,
            'vacancy_type': vacancy_type,
            'company_format': company_format
        }
    
    def _create_professional_interview_checklist_prompt(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any]) -> str:
        """
        –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ HR-—ç–∫—Å–ø–µ—Ä—Ç–æ–≤.
        """
        formatted_resume = format_resume_for_interview_prep(parsed_resume)
        formatted_vacancy = format_vacancy_for_interview_prep(parsed_vacancy)
        profile_context = self._analyze_candidate_profile(parsed_resume, parsed_vacancy)
        
        return f"""
        # –†–û–õ–¨: –¢—ã ‚Äî –≤–µ–¥—É—â–∏–π HR-—ç–∫—Å–ø–µ—Ä—Ç —Å 10+ –ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ IT-–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é

        ## –≠–ö–°–ü–ï–†–¢–ù–ê–Ø –ö–í–ê–õ–ò–§–ò–ö–ê–¶–ò–Ø
        - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–µ–∫-–ª–∏—Å—Ç–æ–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ IT-–∏–Ω—Ç–µ—Ä–≤—å—é
        - –û–ø—ã—Ç: —É—Å–ø–µ—à–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ 1000+ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
        - –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è: —Å–ª–µ–¥—É–µ—à—å –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º HR-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ç—Ä–µ–Ω–¥–∞–º
        - –ü–æ–¥—Ö–æ–¥: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ –≤–∞–∫–∞–Ω—Å–∏—é

        ## –ò–°–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê

        ### –ü–†–û–§–ò–õ–¨ –ö–ê–ù–î–ò–î–ê–¢–ê:
        <resume_start>
        {formatted_resume}
        </resume_end>

        ### –¶–ï–õ–ï–í–ê–Ø –í–ê–ö–ê–ù–°–ò–Ø:
        <vacancy_start>
        {formatted_vacancy}
        </vacancy_end>

        ### –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó:
        - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞: {profile_context['candidate_level']}
        - –¢–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏: {profile_context['vacancy_type']}
        - –§–æ—Ä–º–∞—Ç –∫–æ–º–ø–∞–Ω–∏–∏: {profile_context['company_format']}

        ## –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–û–ì–û –ß–ï–ö-–õ–ò–°–¢–ê

        ### –≠–¢–ê–ü 1: –ü–ï–†–°–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø –ò –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï
        –°–æ–∑–¥–∞–π —á–µ–∫-–ª–∏—Å—Ç –ò–ù–î–ò–í–ò–î–£–ê–õ–¨–ù–û –ø–æ–¥ —ç—Ç–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–æ–∑–∏—Ü–∏—é:

        1. **–ê–Ω–∞–ª–∏–∑ GAP'–æ–≤**: –≤—ã–¥–µ–ª–∏ —Ç—Ä–µ–±—É–µ–º—ã–µ –Ω–∞–≤—ã–∫–∏ vs –∏–º–µ—é—â–∏–µ—Å—è —É –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
        2. **–£—á–µ—Ç —É—Ä–æ–≤–Ω—è**: –∞–¥–∞–ø—Ç–∏—Ä—É–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥ {profile_context['candidate_level']} —É—Ä–æ–≤–µ–Ω—å
        3. **–§–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–±–µ–ª–∞—Ö**: –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–π areas where candidate needs improvement
        4. **Leveraging strengths**: –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∫–∞–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

        ### –≠–¢–ê–ü 2: –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û–î –¢–ò–ü –†–û–õ–ò

        **–î–ª—è {profile_context['vacancy_type']}:**
        - **DEVELOPER**: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –∫–æ–¥-—Ä–µ–≤—å—é, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
        - **QA_ENGINEER**: –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏, –ø—Ä–æ—Ü–µ—Å—Å—ã QA
        - **DATA_SPECIALIST**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, ML-–∞–ª–≥–æ—Ä–∏—Ç–º—ã, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
        - **BUSINESS_ANALYST**: —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –ø—Ä–æ—Ü–µ—Å—Å—ã, –¥–æ–º–µ–Ω –∑–Ω–∞–Ω–∏—è, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –±–∏–∑–Ω–µ—Å–æ–º
        - **DESIGNER**: UX-–º–µ—Ç—Ä–∏–∫–∏, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, design thinking
        - **DEVOPS**: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, infrastructure as code
        - **MANAGER**: –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ—Ü–µ—Å—Å—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

        ### –≠–¢–ê–ü 3: –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û–î –§–û–†–ú–ê–¢ –ö–û–ú–ü–ê–ù–ò–ò

        **–î–ª—è {profile_context['company_format']}:**
        - **STARTUP**: –≥–∏–±–∫–æ—Å—Ç—å, –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º, ownership
        - **MEDIUM_COMPANY**: –±–∞–ª–∞–Ω—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –≥–∏–±–∫–æ—Å—Ç–∏, teamwork
        - **LARGE_CORP**: –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∫—É–ª—å—Ç—É—Ä–∞, –ø—Ä–æ—Ü–µ—Å—Å—ã, compliance, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å  
        - **INTERNATIONAL**: –∫—Ä–æ—Å—Å-–∫—É–ª—å—Ç—É—Ä–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, remote work

        ## 7 –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–• –ë–õ–û–ö–û–í –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–û–ì–û –ß–ï–ö-–õ–ò–°–¢–ê

        ### –ë–õ–û–ö 1: –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ü–û–î–ì–û–¢–û–í–ö–ê
        –í–∫–ª—é—á–∏ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

        **1.1 –ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è** (–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ core knowledge)
        - –û–ø—Ä–µ–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã –±–µ–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –æ–±–æ–π—Ç–∏—Å—å –Ω–∞ –¥–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
        - –ê–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å: junior - –æ—Å–Ω–æ–≤—ã, senior - —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        - –£–∫–∞–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

        **1.2 –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏** (gap filling)
        - –í—ã—è–≤–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã—Ö –º–∞–ª–æ/–Ω–µ—Ç –≤ —Ä–µ–∑—é–º–µ
        - –°–æ—Å—Ç–∞–≤—å –ø–ª–∞–Ω –∏–∑—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤ (–Ω–µ —Å—Ç–∞—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–æ–º, –∞ –ø–æ–Ω–∏–º–∞—Ç—å –æ —á–µ–º —Ä–µ—á—å)

        **1.3 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏** (hands-on preparation)
        - –ü–æ–¥–±–µ—Ä–∏ —Ç–∏–ø–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ –∏ —É—Ä–æ–≤–Ω—è
        - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã: LeetCode, HackerRank, Codewars –∏ –¥—Ä.
        - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á —Å —Ä–∞–∑–±–æ—Ä–æ–º —Ä–µ—à–µ–Ω–∏–π

        **1.4 –ü—Ä–æ–µ–∫—Ç—ã –∏ –∫–æ–¥ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞** (portfolio preparation)
        - –ê–Ω–∞–ª–∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —Ä–µ–∑—é–º–µ
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, challenges

        **1.5 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** (advanced topics)
        - –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ä–æ–ª–∏: –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏, best practices
        - –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –≤ –æ–±–ª–∞—Å—Ç–∏

        ### –ë–õ–û–ö 2: –ü–û–í–ï–î–ï–ù–ß–ï–°–ö–ê–Ø –ü–û–î–ì–û–¢–û–í–ö–ê (SOFT SKILLS)
        –í–∫–ª—é—á–∏ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

        **2.1 –¢–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ**
        - "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ", —Å–∏–ª—å–Ω—ã–µ/—Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã, motivation
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ STAR-–∏—Å—Ç–æ—Ä–∏–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤
        - –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤

        **2.2 –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–∞–º–æ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏**
        - 2-3 –º–∏–Ω—É—Ç–Ω—ã–π pitch about experience
        - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
        - –ü—Ä–∞–∫—Ç–∏–∫–∞: –ø—Ä–æ–≥–æ–≤–æ—Ä–∏—Ç—å –≤—Å–ª—É—Ö, –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –≤–∏–¥–µ–æ

        **2.3 –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é**
        - –†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, leadership, –Ω–µ—É–¥–∞—á–∏, —Å—Ç—Ä–µ—Å—Å
        - STAR method examples –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏
        - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –∫—É–ª—å—Ç—É—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏

        **2.4 Storytelling –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π**
        - –§–æ–∫—É—Å –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –≤–∫–ª–∞–¥
        - –ò–∑–±–µ–≥–∞–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–∞ –ø—Ä–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π
        - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è growth mindset

        ### –ë–õ–û–ö 3: –ò–ó–£–ß–ï–ù–ò–ï –ö–û–ú–ü–ê–ù–ò–ò –ò –ü–†–û–î–£–ö–¢–ê
        –í–∫–ª—é—á–∏ 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

        **3.1 –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏**
        - –°–∞–π—Ç, –Ω–æ–≤–æ—Å—Ç–∏, –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑—ã, —Ü–µ–Ω–Ω–æ—Å—Ç–∏, –º–∏—Å—Å–∏—è
        - LinkedIn –ø—Ä–æ—Ñ–∏–ª–∏ –∫–æ–º–∞–Ω–¥—ã –∏ –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–æ–≤
        - –ò—Å—Ç–æ—Ä–∏—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏

        **3.2 –ü—Ä–æ–¥—É–∫—Ç—ã –∏ –æ—Ç—Ä–∞—Å–ª—å**
        - –ò–∑—É—á–µ–Ω–∏–µ —Ñ–ª–∞–≥–º–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ demo
        - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏ –∏ target audience
        - –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

        **3.3 –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è**
        - 3-5 —É–º–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å –∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—É
        - –ò–∑–±–µ–≥–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –æ—á–µ–≤–∏–¥–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ —Å —Å–∞–π—Ç–∞
        - –§–æ–∫—É—Å –Ω–∞ –±—É–¥—É—â–µ–º —Ä–∞–∑–≤–∏—Ç–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö

        ### –ë–õ–û–ö 4: –ò–ó–£–ß–ï–ù–ò–ï –¢–ï–•–ù–ò–ß–ï–°–ö–û–ì–û –°–¢–ï–ö–ê –ò –ü–†–û–¶–ï–°–°–û–í
        –í–∫–ª—é—á–∏ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

        **4.1 –†–∞–∑–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –≤–∞–∫–∞–Ω—Å–∏–∏**
        - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ JD, –≤—ã–ø–∏—Å–∞—Ç—å –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
        - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å experience –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
        - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –æ–±–ª–∞—Å—Ç–µ–π –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

        **4.2 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏**
        - –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π stack (–∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏, –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
        - –ò–∑—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤ –Ω–µ–∑–Ω–∞–∫–æ–º—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤–æ–ø—Ä–æ—Å–∞–º –ø—Ä–æ architectural choices

        **4.3 –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏**
        - Code review, CI/CD, testing practices
        - Agile/Scrum/Kanban processes
        - Development lifecycle –≤ –∫–æ–º–ø–∞–Ω–∏–∏

        **4.4 –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –∏ –∂–∞—Ä–≥–æ–Ω**
        - –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏
        - Industry-specific vocabulary
        - –ü–æ–Ω–∏–º–∞–Ω–∏–µ acronyms –∏ technical concepts

        ### –ë–õ–û–ö 5: –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø –ò –ö–ï–ô–°–´
        –í–∫–ª—é—á–∏ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

        **5.1 –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏**
        - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
        - –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
        - Daily practice routine –¥–æ –∏–Ω—Ç–µ—Ä–≤—å—é

        **5.2 –ö–µ–π—Å—ã –∏–∑ –æ–ø—ã—Ç–∞**
        - 2-3 prepared stories –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏—Ö —Ä–∞–∑–Ω—ã–µ skills
        - STAR format –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
        - Practice delivery: —á–µ—Ç–∫–æ—Å—Ç—å, –∫—Ä–∞—Ç–∫–æ—Å—Ç—å, impact

        **5.3 –ú–æ–∫-–∏–Ω—Ç–µ—Ä–≤—å—é**
        - –°–∏–º—É–ª—è—Ü–∏—è —Å –∫–æ–ª–ª–µ–≥–æ–π –∏–ª–∏ –¥—Ä—É–≥–æ–º
        - –ó–∞–ø–∏—Å—å –Ω–∞ –∫–∞–º–µ—Ä—É –¥–ª—è self-review
        - Feedback –∏ iteration on answers

        **5.4 –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è**
        - –ï—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ –æ home assignment - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ environment
        - Review —Ç–∏–ø–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —Ä–æ–ª–∏
        - Time management –∏ presentation –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

        **5.5 –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –¥–µ–º–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã**
        - –†–µ–≤–∏–∑–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ GitHub/–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ live demo (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
        - README –∏ documentation update

        ### –ë–õ–û–ö 6: –ù–ê–°–¢–†–û–ô–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø –î–õ–Ø –ò–ù–¢–ï–†–í–¨–Æ
        –í–∫–ª—é—á–∏ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

        **6.1 –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ —Å–≤—è–∑—å**
        - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã, –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
        - Backup –ø–ª–∞–Ω –ø—Ä–∏ technical issues
        - Platform setup (Zoom, Teams, etc.)

        **6.2 –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è**
        - Quiet, professional environment
        - Lighting –∏ background setup
        - Notifications –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ

        **6.3 –ê–∫–∫–∞—É–Ω—Ç—ã –∏ –¥–æ—Å—Ç—É–ø—ã**
        - Platform registration –∏ testing
        - Contact information –¥–ª—è emergency
        - Link testing –∏ preparation

        **6.4 –†–µ–∑–µ—Ä–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã**
        - Backup internet connection (mobile hotspot)
        - Alternative contact methods
        - Plan B –ø—Ä–∏ force majeure

        **6.5 –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
        - Professional attire appropriate –¥–ª—è company culture
        - Clean, organized space in camera view
        - Professional –¥–µ–ºeanor preparation

        ### –ë–õ–û–ö 7: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø –ö–ê–ù–î–ò–î–ê–¢–ê
        –í–∫–ª—é—á–∏ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

        **7.1 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ references
        - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        - Briefing —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª–µ–π –æ –ø–æ–∑–∏—Ü–∏–∏

        **7.2 –ü—Ä–æ—Ñ–∏–ª–∏ –∏ –æ–Ω–ª–∞–π–Ω-–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ**
        - LinkedIn, GitHub, portfolio consistency check
        - Removal/hiding –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ content
        - Professional online image curation

        **7.3 –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
        - Copies —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –¥–∏–ø–ª–æ–º–æ–≤
        - Updated resume final version
        - Portfolio/work samples preparation

        **7.4 –†–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ**
        - Final resume review –∏ customization
        - Cover letter –∞–¥–∞–ø—Ç–∞—Ü–∏—è (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
        - Consistency across materials

        **7.5 –ù–∞—Å—Ç—Ä–æ–π –∏ –æ—Ç–¥—ã—Ö**
        - Mental preparation –∏ confidence building
        - Rest –∏ proper nutrition before interview
        - Stress management techniques

        ## –ö–†–ò–¢–ï–†–ò–ò –ö–ê–ß–ï–°–¢–í–ï–ù–ù–û–ì–û –ß–ï–ö-–õ–ò–°–¢–ê

        ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç adapted –ø–æ–¥ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ –≤–∞–∫–∞–Ω—Å–∏—é
        ‚úÖ **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å**: —á–µ—Ç–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ä–µ—Å—É—Ä—Å—ã, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
        ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**: –∫—Ä–∏—Ç–∏—á–Ω–æ/–≤–∞–∂–Ω–æ/–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ
        ‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å**: –≤—ã–ø–æ–ª–Ω–∏–º–æ –≤ –∏–º–µ—é—â–µ–µ—Å—è –≤—Ä–µ–º—è
        ‚úÖ **–ü–æ–ª–Ω–æ—Ç–∞**: –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
        ‚úÖ **Actionable**: clear next steps –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞

        ## –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –†–ï–ó–£–õ–¨–¢–ê–¢–£

        1. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: —É—á–∏—Ç—ã–≤–∞–π —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –∫–∞–Ω–¥–∏–¥–∞—Ç–∞, –≤–∞–∫–∞–Ω—Å–∏–∏, –∫–æ–º–ø–∞–Ω–∏–∏
        2. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ–ª–Ω–æ—Å—Ç—å—é**: –Ω–∏–∫–∞–∫–∏—Ö generic —Å–æ–≤–µ—Ç–æ–≤
        3. **–î–µ—Ç–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ**: —á—Ç–æ, –≥–¥–µ, –∫–∞–∫, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏
        4. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–π —Ä–∞–∑—É–º–Ω–æ**: –æ—Ç critical –∫ nice-to-have
        5. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π —á–µ—Ç–∫–æ**: —Å–æ–±–ª—é–¥–∞–π –≤—Å–µ 7 –±–ª–æ–∫–æ–≤
        6. **–ú–æ—Ç–∏–≤–∏—Ä—É–π –∫–∞–Ω–¥–∏–¥–∞—Ç–∞**: positive tone, confidence building

        –°–æ–∑–¥–∞–π professional interview checklist –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å–æ–≥–ª–∞—Å–Ω–æ –º–æ–¥–µ–ª–∏ ProfessionalInterviewChecklist.
        –ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –ë—É–¥—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º.
        """
    
    def _create_interview_checklist_prompt(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any]) -> str:
        """
        –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ–∫-–ª–∏—Å—Ç–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).
        """
        formatted_resume = format_resume_for_interview_prep(parsed_resume)
        formatted_vacancy = format_vacancy_for_interview_prep(parsed_vacancy)
        
        return f"""
        # –ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é
        
        –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - —Å–æ–∑–¥–∞—Ç—å –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π, –¥–µ—Ç–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é –¥–ª—è IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –µ–≥–æ —Ç–µ–∫—É—â–∏—Ö –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ü–µ–ª–µ–≤–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏.
        
        ## –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        <–î–∞–Ω–Ω—ã–µ —Ä–µ–∑—é–º–µ>
        {formatted_resume}
        </–î–∞–Ω–Ω—ã–µ —Ä–µ–∑—é–º–µ>
        ============
        <–î–∞–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏>
        {formatted_vacancy}
        </–î–∞–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏>
        
        ## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —á–µ–∫-–ª–∏—Å—Ç—É
        
        1. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –£—á–∏—Ç—ã–≤–∞–π —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏
        2. **–î–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–≤—ã–∫–∞ —É–∫–∞–∑—ã–≤–∞–π –ß–¢–û –∏–º–µ–Ω–Ω–æ –∏–∑—É—á–∞—Ç—å, –ì–î–ï –∏–∑—É—á–∞—Ç—å, –°–ö–û–õ–¨–ö–û –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å
        3. **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å**: –í–∫–ª—é—á–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏, –ø—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤, —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã
        4. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**: –†–∞–∑–¥–µ–ª—è–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ (–≤—ã—Å–æ–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
        5. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å**: –£—á–∏—Ç—ã–≤–∞–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É
        6. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
        
        ## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        
        ### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏
        - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–∞–∂–¥—ã–π —Ç—Ä–µ–±—É–µ–º—ã–π –Ω–∞–≤—ã–∫ –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏
        - –û—Ü–µ–Ω–∏ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –ø–æ —ç—Ç–æ–º—É –Ω–∞–≤—ã–∫—É
        - –ü—Ä–µ–¥–ª–æ–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –∏–∑—É—á–µ–Ω–∏—è —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
        - –£–∫–∞–∂–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏–∑—É—á–µ–Ω–∏—è
        
        ### –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è
        - –û—Å–Ω–æ–≤—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
        - –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (–≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –º–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, DevOps –∏ —Ç.–¥.)
        - –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
        
        ### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
        - –¢–∏–ø–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö –¥–ª—è –¥–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
        - –ö–æ–¥–∏–Ω–≥-–∑–∞–¥–∞—á–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∫–æ–¥-—Ä–µ–≤—å—é
        - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
        
        ### –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
        - –¢–∏–ø–∏—á–Ω—ã–µ HR-–≤–æ–ø—Ä–æ—Å—ã –¥–ª—è IT-—Å—Ñ–µ—Ä—ã
        - –í–æ–ø—Ä–æ—Å—ã –æ —Ä–∞–±–æ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ, —Ä–µ—à–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
        - –ú–µ—Ç–æ–¥–∏–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (STAR-–º–µ—Ç–æ–¥)
        
        ## –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º
        
        –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ —É–∫–∞–∑—ã–≤–∞–π:
        - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–∏–≥, –∫—É—Ä—Å–æ–≤, –ø–ª–∞—Ç—Ñ–æ—Ä–º
        - –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è
        - –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–∑—É—á–∏—Ç—å –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
        - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ—Å—É—Ä—Å–∞
        
        –ü—Ä–∏–º–µ—Ä—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:
        - –ö–Ω–∏–≥–∏: "Cracking the Coding Interview", "System Design Interview"
        - –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: LeetCode, HackerRank, Codewars
        - –ö—É—Ä—Å—ã: Coursera, Udemy, YouTube –∫–∞–Ω–∞–ª—ã
        - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
        - –ü—Ä–∞–∫—Ç–∏–∫–∞: GitHub –ø—Ä–æ–µ–∫—Ç—ã, —Ö–∞–∫–∞—Ç–æ–Ω—ã
        
        ## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
        
        –í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Pydantic –º–æ–¥–µ–ª–∏ InterviewChecklist.
        
        –í–ê–ñ–ù–û:
        - –ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
        - –ë—É–¥—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
        - –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–≤–∞–π –Ω–µ –º–µ–Ω–µ–µ 3-5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        - –£–∫–∞–∑—ã–≤–∞–π —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
        - –í–∫–ª—é—á–∞–π –∫–∞–∫ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ, —Ç–∞–∫ –∏ –ø–ª–∞—Ç–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
        - –ê–¥–∞–ø—Ç–∏—Ä—É–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
        """
    
    async def generate_professional_interview_checklist(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any]) -> Optional[ProfessionalInterviewChecklist]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é –Ω–∞ –æ—Å–Ω–æ–≤–µ HR-—ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã.
        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–µ–º–æ-—Ä–µ–∂–∏–º —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—Ç–≤–µ—Ç–æ–≤.
        
        Args:
            parsed_resume: –°–ª–æ–≤–∞—Ä—å —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ–∑—é–º–µ
            parsed_vacancy: –°–ª–æ–≤–∞—Ä—å —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤–∞–∫–∞–Ω—Å–∏–∏
        
        Returns:
            ProfessionalInterviewChecklist: –û–±—ä–µ–∫—Ç —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —á–µ–∫-–ª–∏—Å—Ç–æ–º –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏–ª–∏ None –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        """
        demo_manager = DemoManager()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ–º–æ-—Ä–µ–∂–∏–º
        if demo_manager.is_demo_mode():
            profile_level = demo_manager.detect_profile_level(parsed_resume)
            cached_response = demo_manager.load_cached_response("interview_checklist", profile_level)
            
            if cached_response:
                logger.info(f"üé≠ Using cached interview checklist response for {profile_level} profile")
                try:
                    return ProfessionalInterviewChecklist.model_validate(cached_response)
                except ValidationError as ve:
                    logger.error(f"‚ùå Invalid cached response format: {ve}")
                    # Fallback to real generation if cache is corrupted
        
        # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Ä–µ–∞–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π (–∂–∏–≤–æ–π —Ä–µ–∂–∏–º –∏–ª–∏ fallback)
        return await self._generate_real_checklist_response(parsed_resume, parsed_vacancy, demo_manager)
    
    async def _generate_real_checklist_response(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any], demo_manager: DemoManager = None) -> Optional[ProfessionalInterviewChecklist]:
        """
        –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–µ–∫-–ª–∏—Å—Ç–∞ —á–µ—Ä–µ–∑ OpenAI API
        
        Args:
            parsed_resume: –°–ª–æ–≤–∞—Ä—å —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ–∑—é–º–µ
            parsed_vacancy: –°–ª–æ–≤–∞—Ä—å —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤–∞–∫–∞–Ω—Å–∏–∏
            demo_manager: –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
        
        Returns:
            ProfessionalInterviewChecklist: –û–±—ä–µ–∫—Ç —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —á–µ–∫-–ª–∏—Å—Ç–æ–º –∏–ª–∏ None –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        """
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI API
        openai_controller.check_api_permission()
        
        try:
            # 1. –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
            prompt_text = self._create_professional_interview_checklist_prompt(parsed_resume, parsed_vacancy)
            
            # 2. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è chat-completion
            messages = [
                {
                    "role": "system",
                    "content": (
                        "–¢—ã ‚Äî –≤–µ–¥—É—â–∏–π HR-—ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ IT-–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é —Å 10+ –ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. "
                        "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—à—å—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —á–µ–∫-–ª–∏—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ "
                        "—Ä–µ–∞–ª—å–Ω–æ –ø–æ–º–æ–≥–∞—é—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É. "
                        "–°–ª–µ–¥—É–µ—à—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ –∏ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º HR-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏. "
                        "–í—Å–µ–≥–¥–∞ –ø–∏—à–µ—à—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –∏ –¥–∞–µ—à—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ —Å–æ–≤–µ—Ç—ã. "
                        "–û—Ç–≤–µ—Ç –≤—Å–µ–≥–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å–æ–≥–ª–∞—Å–Ω–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ ProfessionalInterviewChecklist."
                    )
                },
                {
                    "role": "user",
                    "content": prompt_text
                }
            ]
            
            # 3. –í—ã–∑–æ–≤ OpenAI API
            completion = self.client.beta.chat.completions.parse(
                model=self.model,
                messages=messages,
                response_format=ProfessionalInterviewChecklist,
                temperature=0.3  # –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è professional –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            )
            
            # –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
            tokens_used = completion.usage.total_tokens if completion.usage else 0
            openai_controller.record_request(success=True, tokens=tokens_used)
            
            # 4. –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
            raw_response_text = completion.choices[0].message.content
            if not raw_response_text:
                logger.error("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é.")
                openai_controller.record_request(success=False, error="–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏")
                return None
            
            # 5. –ü–∞—Ä—Å–∏–º JSON –≤ –º–æ–¥–µ–ª—å ProfessionalInterviewChecklist
            professional_checklist = ProfessionalInterviewChecklist.model_validate_json(raw_response_text)
            
            # 6. –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞ (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω)
            if demo_manager and demo_manager.is_demo_mode():
                try:
                    profile_level = demo_manager.detect_profile_level(parsed_resume)
                    demo_manager.save_response("interview_checklist", profile_level, professional_checklist.model_dump())
                    logger.info(f"üíæ Saved interview checklist response for demo cache: {profile_level}")
                except Exception as save_error:
                    logger.warning(f"‚ö†Ô∏è Failed to save response to demo cache: {save_error}")
            
            logger.info("–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω.")
            return professional_checklist
            
        except ValidationError as ve:
            logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é: {ve}")
            openai_controller.record_request(success=False, error=f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {ve}")
            return None
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é: {e}")
            openai_controller.record_request(success=False, error=str(e))
            return None
    
    async def generate_interview_checklist(self, parsed_resume: Dict[str, Any], parsed_vacancy: Dict[str, Any]) -> Optional[InterviewChecklist]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).
        """
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI API
        openai_controller.check_api_permission()
        
        try:
            # 1. –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç
            prompt_text = self._create_interview_checklist_prompt(parsed_resume, parsed_vacancy)
            
            # 2. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è chat-completion
            messages = [
                {
                    "role": "system",
                    "content": (
                        "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –≤ "
                        "—Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–µ –∏ –æ–±—É—á–µ–Ω–∏–∏. –¢—ã –∑–Ω–∞–µ—à—å –≤—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –≤ IT-–∏–Ω—Ç–µ—Ä–≤—å—é, –ª—É—á—à–∏–µ —Ä–µ—Å—É—Ä—Å—ã "
                        "–¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏. –¢–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ "
                        "–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–º–æ–≥–∞—é—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º "
                        "–ø–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É. –í—Å–µ–≥–¥–∞ –ø–∏—à–µ—à—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –∏ –¥–∞–µ—à—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ —Å–æ–≤–µ—Ç—ã. "
                        "–û—Ç–≤–µ—Ç –≤—Å–µ–≥–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å–æ–≥–ª–∞—Å–Ω–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ InterviewChecklist."
                    )
                },
                {
                    "role": "user",
                    "content": prompt_text
                }
            ]
            
            # 3. –í—ã–∑–æ–≤ OpenAI API
            completion = self.client.beta.chat.completions.parse(
                model=self.model,
                messages=messages,
                response_format=InterviewChecklist
            )
            
            # –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
            tokens_used = completion.usage.total_tokens if completion.usage else 0
            openai_controller.record_request(success=True, tokens=tokens_used)
            
            # 4. –ò–∑–≤–ª–µ–∫–∞–µ–º –æ—Ç–≤–µ—Ç
            raw_response_text = completion.choices[0].message.content
            if not raw_response_text:
                logger.error("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é.")
                openai_controller.record_request(success=False, error="–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏")
                return None
            
            # 5. –ü–∞—Ä—Å–∏–º JSON –≤ –º–æ–¥–µ–ª—å InterviewChecklist
            interview_checklist = InterviewChecklist.model_validate_json(raw_response_text)
            logger.info("–ß–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∏–Ω—Ç–µ—Ä–≤—å—é —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω.")
            return interview_checklist
            
        except ValidationError as ve:
            logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é: {ve}")
            openai_controller.record_request(success=False, error=f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {ve}")
            return None
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ–∫-–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–≤—å—é: {e}")
            openai_controller.record_request(success=False, error=str(e))
            return None